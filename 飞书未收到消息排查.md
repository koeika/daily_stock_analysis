# ğŸ” é£ä¹¦æœªæ”¶åˆ°æ¶ˆæ¯æ’æŸ¥æŒ‡å—

## ğŸ“‹ æ’æŸ¥æ­¥éª¤

### Step 1: æ£€æŸ¥ Actions æ˜¯å¦æ‰§è¡ŒæˆåŠŸ

è®¿é—®ä½ çš„ GitHub ä»“åº“ï¼š
```
https://github.com/ä½ çš„ç”¨æˆ·å/daily_stock_analysis/actions
```

æŸ¥çœ‹æœ€è¿‘ä¸€æ¬¡è¿è¡Œï¼š
- âœ… **ç»¿è‰²å‹¾å·** = æ‰§è¡ŒæˆåŠŸ
- âŒ **çº¢è‰²å‰å·** = æ‰§è¡Œå¤±è´¥
- ğŸŸ¡ **é»„è‰²åœ†åœˆ** = æ­£åœ¨è¿è¡Œ

---

### Step 2: æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

1. ç‚¹å‡»æœ€è¿‘çš„è¿è¡Œä»»åŠ¡
2. ç‚¹å‡» **"analyze"** æŸ¥çœ‹è¯¦ç»†æ­¥éª¤
3. é‡ç‚¹æŸ¥çœ‹ä»¥ä¸‹å†…å®¹ï¼š

#### 2.1 é…ç½®æ£€æŸ¥éƒ¨åˆ†
```
ã€AI é…ç½®ã€‘
  Gemini API Key: âœ… å·²é…ç½®
  OpenAI API Key: ï¼Ÿï¼Ÿï¼Ÿ        â† è¿™é‡Œåº”è¯¥æ˜¯ âœ…
```

#### 2.2 æ‰§è¡Œåˆ†æéƒ¨åˆ†
æŸ¥æ‰¾é”™è¯¯ä¿¡æ¯ï¼š
- `NameError`
- `API key not found`
- `Failed to send message`
- `Connection error`

#### 2.3 æ¨é€éƒ¨åˆ†
æŸ¥æ‰¾é£ä¹¦ç›¸å…³æ—¥å¿—ï¼š
- `å‘é€é£ä¹¦æ¶ˆæ¯`
- `é£ä¹¦æ¶ˆæ¯å‘é€æˆåŠŸ`
- `é£ä¹¦æ¨é€å¤±è´¥`

---

## ğŸš¨ æ ¹æ®ä¹‹å‰çš„é”™è¯¯ï¼Œä½ çš„é—®é¢˜æ˜¯ï¼š

### é—®é¢˜1: ä»£ç è¯­æ³•é”™è¯¯ï¼ˆå·²ä¿®å¤ï¼‰
```python
NameError: name 'true' is not defined
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
âœ… å·²ä¿®å¤ï¼šä¿®æ”¹ `src/config.py` ä¸­çš„ `true` â†’ `False`

**ä½†éœ€è¦æäº¤ä»£ç **ï¼š
```bash
cd /Users/huixia.huang/Documents/daily_stock_analysis
git add src/config.py
git commit -m "fix: correct Python boolean syntax in config.py"
git push origin main
```

---

### é—®é¢˜2: ç¼ºå°‘å¿…éœ€çš„ Secrets âš ï¸

ä»æ—¥å¿—çœ‹åˆ°ï¼š
```
ã€AI é…ç½®ã€‘
  OpenAI API Key: âšª æœªé…ç½®    â† ç¼ºå°‘è¿™ä¸ªï¼
```

**ä½ ç›®å‰åªé…ç½®äº† 3 ä¸ªï¼Œè¿˜éœ€è¦ 4 ä¸ª**ï¼š

#### å¿…é¡»æ·»åŠ çš„ Secretsï¼š

```
â˜‘ï¸ OPENAI_API_KEY      = sk-bf0c1ee9fb4c46cc8c9ea62a14d03a21
â˜‘ï¸ OPENAI_BASE_URL     = https://api.deepseek.com/v1
â˜‘ï¸ OPENAI_MODEL        = deepseek-chat
â˜‘ï¸ STOCK_LIST          = 159636,159740,159928,588920,516270,159525,512980
```

---

## ğŸ¯ å®Œæ•´çš„ä¿®å¤æ­¥éª¤

### æ­¥éª¤1: æäº¤ä»£ç ä¿®å¤

```bash
cd /Users/huixia.huang/Documents/daily_stock_analysis

# æäº¤ä¿®å¤
git add src/config.py
git commit -m "fix: correct Python boolean syntax in config.py"
git push origin main
```

---

### æ­¥éª¤2: æ·»åŠ ç¼ºå¤±çš„ Secrets

è®¿é—®ï¼š
```
https://github.com/ä½ çš„ç”¨æˆ·å/daily_stock_analysis/settings/secrets/actions
```

ç‚¹å‡» **"New repository secret"**ï¼Œé€ä¸ªæ·»åŠ ï¼š

#### Secret 1: OPENAI_API_KEY â­
```
Name:   OPENAI_API_KEY
Secret: sk-bf0c1ee9fb4c46cc8c9ea62a14d03a21
```

#### Secret 2: OPENAI_BASE_URL â­
```
Name:   OPENAI_BASE_URL
Secret: https://api.deepseek.com/v1
```

#### Secret 3: OPENAI_MODEL â­
```
Name:   OPENAI_MODEL
Secret: deepseek-chat
```

#### Secret 4: STOCK_LIST â­
```
Name:   STOCK_LIST
Secret: 159636,159740,159928,588920,516270,159525,512980
```

---

### æ­¥éª¤3: é‡æ–°è¿è¡Œ Actions

1. ç­‰å¾…ä»£ç æ¨é€å®Œæˆï¼ˆæ­¥éª¤1ï¼‰
2. ç­‰å¾… Secrets é…ç½®å®Œæˆï¼ˆæ­¥éª¤2ï¼‰
3. è®¿é—® Actions é¡µé¢
4. ç‚¹å‡» **"Run workflow"**
5. é€‰æ‹© **"full"** æ¨¡å¼
6. ç‚¹å‡» **"Run workflow"** ç¡®è®¤

---

### æ­¥éª¤4: æŸ¥çœ‹æ‰§è¡Œæ—¥å¿—

ç‚¹å‡»è¿è¡Œä»»åŠ¡ï¼ŒæŸ¥çœ‹æ—¥å¿—ä¸­çš„é…ç½®æ£€æŸ¥ï¼š

```
ã€AI é…ç½®ã€‘
  Gemini API Key: âœ… å·²é…ç½®
  OpenAI API Key: âœ… å·²é…ç½®    â† åº”è¯¥å˜æˆ âœ…
ã€é€šçŸ¥æ¸ é“ã€‘
  é£ä¹¦: âœ… å·²é…ç½®
```

---

## ğŸ“Š å¸¸è§å¤±è´¥åŸå› å¯¹ç…§è¡¨

| ç°è±¡ | åŸå›  | è§£å†³æ–¹æ³• |
|-----|------|---------|
| Actions çº¢å‰ï¼ŒNameError | ä»£ç è¯­æ³•é”™è¯¯ | ä¿®å¤ config.pyï¼Œæ¨é€ä»£ç  |
| Actions çº¢å‰ï¼Œ"OpenAI API Key æœªé…ç½®" | ç¼ºå°‘ Secrets | æ·»åŠ  OPENAI_API_KEY ç­‰ |
| Actions ç»¿å‹¾ï¼Œä½†é£ä¹¦æ²¡æ¶ˆæ¯ | FEISHU_WEBHOOK_URL é”™è¯¯ | æ£€æŸ¥ URL æ˜¯å¦æ­£ç¡® |
| Actions ç»¿å‹¾ï¼Œé£ä¹¦æ”¶åˆ°ç©ºæ¶ˆæ¯ | STOCK_LIST æœªé…ç½® | æ·»åŠ  STOCK_LIST Secret |
| Actions æ‰§è¡Œå¾ˆä¹… | AI åˆ†æè€—æ—¶ | æ­£å¸¸ï¼Œç­‰å¾… 3-5 åˆ†é’Ÿ |

---

## ğŸ” è¯¦ç»†æ’æŸ¥æ¸…å•

### æ£€æŸ¥1: GitHub Secrets é…ç½®å®Œæ•´

åº”è¯¥æœ‰ **7ä¸ª Secrets**ï¼š
- [x] FEISHU_WEBHOOK_SECRET
- [x] FEISHU_WEBHOOK_URL
- [x] GEMINI_API_KEY
- [ ] OPENAI_API_KEY âš ï¸ **ç¼ºå°‘**
- [ ] OPENAI_BASE_URL âš ï¸ **ç¼ºå°‘**
- [ ] OPENAI_MODEL âš ï¸ **ç¼ºå°‘**
- [ ] STOCK_LIST âš ï¸ **ç¼ºå°‘**

---

### æ£€æŸ¥2: ä»£ç æ˜¯å¦æœ‰é”™è¯¯

```bash
cd /Users/huixia.huang/Documents/daily_stock_analysis
python3 -m py_compile src/config.py
```

å¦‚æœæŠ¥é”™ï¼Œè¯´æ˜ä»£ç æœ‰é—®é¢˜ã€‚

---

### æ£€æŸ¥3: Actions æ‰§è¡Œæ—¥å¿—

åœ¨ Actions æ—¥å¿—ä¸­æœç´¢å…³é”®è¯ï¼š
- `error` - é”™è¯¯ä¿¡æ¯
- `failed` - å¤±è´¥ä¿¡æ¯
- `é£ä¹¦` - æ¨é€ç›¸å…³
- `Exception` - å¼‚å¸¸ä¿¡æ¯

---

### æ£€æŸ¥4: é£ä¹¦ Webhook æ˜¯å¦æœ‰æ•ˆ

æœ¬åœ°æµ‹è¯•ï¼š
```bash
cd /Users/huixia.huang/Documents/daily_stock_analysis
python3 test_feishu_simple.py
```

å¦‚æœæœ¬åœ°èƒ½æ”¶åˆ°ï¼Œè¯´æ˜ Webhook é…ç½®æ­£ç¡®ã€‚

---

## ğŸ¯ æœ€å¯èƒ½çš„åŸå› 

æ ¹æ®ä¹‹å‰çš„é”™è¯¯æ—¥å¿—ï¼Œ**æœ€å¯èƒ½çš„åŸå› **æ˜¯ï¼š

```
1. ä»£ç æœ‰è¯­æ³•é”™è¯¯ï¼ˆå·²ä¿®å¤ï¼Œä½†æœªæ¨é€ï¼‰
   â†“
2. Actions æ‰§è¡Œå¤±è´¥ï¼Œæå‰é€€å‡º
   â†“
3. è¿˜æ²¡æ¥å¾—åŠæ¨é€æ¶ˆæ¯ï¼Œç¨‹åºå°±å´©æºƒäº†
   â†“
4. æ‰€ä»¥é£ä¹¦æ”¶ä¸åˆ°æ¶ˆæ¯
```

---

## âœ… è§£å†³æ–¹æ¡ˆ

### å®Œæ•´æ‰§è¡Œå‘½ä»¤ï¼ˆä¸€é”®å®Œæˆï¼‰

```bash
cd /Users/huixia.huang/Documents/daily_stock_analysis && \
git add src/config.py && \
git commit -m "fix: correct Python boolean syntax in config.py" && \
git push origin main && \
echo "" && \
echo "âœ… ä»£ç å·²æ¨é€ï¼" && \
echo "" && \
echo "ğŸ“‹ ä¸‹ä¸€æ­¥ï¼šæ·»åŠ ç¼ºå¤±çš„ 4 ä¸ª Secrets" && \
echo "   1. OPENAI_API_KEY" && \
echo "   2. OPENAI_BASE_URL" && \
echo "   3. OPENAI_MODEL" && \
echo "   4. STOCK_LIST" && \
echo "" && \
echo "ç„¶åé‡æ–°è¿è¡Œ Actions"
```

---

## ğŸ“± é¢„æœŸç»“æœ

### ä¿®å¤å‰
```
Actions æ‰§è¡Œ â†’ âŒ ä»£ç é”™è¯¯ â†’ ç¨‹åºå´©æºƒ â†’ é£ä¹¦æ”¶ä¸åˆ°
```

### ä¿®å¤å
```
Actions æ‰§è¡Œ â†’ âœ… é…ç½®å®Œæ•´ â†’ åˆ†ææˆåŠŸ â†’ ğŸ“± é£ä¹¦æ”¶åˆ°æ¶ˆæ¯
```

---

## ğŸ†˜ å¦‚æœè¿˜æ˜¯æ”¶ä¸åˆ°

### 1. æŸ¥çœ‹å®Œæ•´çš„ Actions æ—¥å¿—

åœ¨æ—¥å¿—æœ€åæŸ¥æ‰¾ï¼š
```
é£ä¹¦æ¶ˆæ¯å‘é€æˆåŠŸ
æˆ–
Failed to send message to Feishu
```

### 2. æ£€æŸ¥ Webhook URL

ç¡®è®¤ `FEISHU_WEBHOOK_URL` æ˜¯å®Œæ•´çš„ï¼š
```
https://open.feishu.cn/open-apis/bot/v2/hook/79791f9f-d027-46e5-98fe-b6bc8a3b3c51
```

ä¸æ˜¯ï¼š
```
open.feishu.cn/open-apis/bot/v2/hook/...  â† ç¼ºå°‘ https://
```

### 3. æµ‹è¯•æœ¬åœ°æ¨é€

```bash
cd /Users/huixia.huang/Documents/daily_stock_analysis
python3 test_feishu_simple.py
```

å¦‚æœæœ¬åœ°èƒ½æ”¶åˆ°ï¼Œè¯´æ˜æ˜¯ Actions é…ç½®é—®é¢˜ã€‚

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

æŠŠä»¥ä¸‹ä¿¡æ¯å‘ç»™æˆ‘ï¼š
1. Actions çš„å®Œæ•´æ—¥å¿—ï¼ˆå¤åˆ¶æ–‡æœ¬ï¼‰
2. æ˜¯å¦æ·»åŠ äº†æ‰€æœ‰ 4 ä¸ª Secrets
3. æœ¬åœ°æµ‹è¯•æ˜¯å¦èƒ½æ”¶åˆ°æ¶ˆæ¯

---

**ç°åœ¨ç«‹å³æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œæ¨é€ä»£ç å¹¶æ·»åŠ  Secretsï¼** ğŸš€
